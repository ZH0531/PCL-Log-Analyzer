<!DOCTYPE html>
<html lang='zh-CN'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width,initial-scale=1.0'>
<title>{{PAGE_TITLE}}</title>
    <style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Microsoft YaHei',sans-serif;background:#f5f7fa;padding:24px;line-height:1.6}
.container{max-width:1400px;margin:0 auto}
.header{background:#fff;border-radius:10px;padding:20px 24px 16px 24px;margin-bottom:24px;box-shadow:0 2px 8px rgba(0,0,0,0.06);position:relative}
.header-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.header h1{font-size:18px;color:#2c3e50;font-weight:600}
.status-big{display:inline-block;padding:8px 20px;background:{{STATUS_COLOR}};color:white;border-radius:16px;font-size:14px;font-weight:600;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
.header-hint{position:absolute;bottom:12px;right:24px;font-size:11px;color:#b0b0b0}
.header-links{display:flex;gap:16px;font-size:13px}
.github-link{color:#667eea;text-decoration:none;transition:all 0.2s;position:relative}
.github-link:hover{color:#5568d3}
.github-link::after{content:'';position:absolute;bottom:-2px;left:0;width:0;height:1px;background:#667eea;transition:width 0.2s}
.github-link:hover::after{width:100%}
.main-layout{display:grid;grid-template-columns:1fr 1fr;gap:24px}
.left-column,.right-column{display:flex;flex-direction:column;gap:20px}
.card{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.06);position:relative}
.card h2{font-size:15px;color:#2c3e50;margin-bottom:16px;font-weight:600;padding-bottom:8px;border-bottom:2px solid #f0f0f0}
.copy-btn{position:absolute;top:16px;right:16px;background:transparent;color:#95a5a6;border:none;padding:6px 12px;font-size:12px;cursor:pointer;transition:all 0.2s;font-weight:400;border-radius:4px}
.copy-btn:hover{color:#667eea;background:rgba(102,126,234,0.08)}
.copy-btn:active{transform:translateY(1px)}
.copy-btn.copied{color:#10b981;background:rgba(16,185,129,0.1)}
.compress-btn{position:absolute;top:16px;right:70px;background:transparent;color:#95a5a6;border:none;padding:6px 12px;font-size:12px;cursor:pointer;transition:all 0.2s;font-weight:400;border-radius:4px}
.compress-btn:hover{color:#f59e0b;background:rgba(245,158,11,0.08)}
.compress-btn:active{transform:translateY(1px)}
.compress-btn.active{color:#f59e0b;background:rgba(245,158,11,0.12);font-weight:500}
.info-grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:12px}
.info-grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.info-item{padding:12px;background:#f8f9fa;border-radius:6px;border-left:3px solid {{STATUS_COLOR}}}
.info-label{font-size:11px;color:#7f8c8d;margin-bottom:5px;text-transform:uppercase}
.info-value{font-size:15px;color:#2c3e50;font-weight:600;word-break:break-word}
.error-box{background:#fff5f5;border:1px solid #ffe0e0;border-radius:6px;padding:12px;margin-bottom:12px}
.error-type{font-weight:600;color:#e74c3c;margin-bottom:8px;font-size:14px}
.error-code{background:#f8f9fa;padding:10px;border-radius:5px;font-family:Consolas,monospace;font-size:11px;color:#555;overflow-x:auto;white-space:pre-wrap;word-break:break-all;line-height:1.5}
.sug-box{background:#f0fdf4;border:1px solid #d1fae5;border-radius:6px;padding:12px;margin-bottom:12px;font-size:14px}
.sug-box strong{color:#059669;margin-right:6px}
.log-container{background:#f8f9fa;border-radius:6px;padding:12px;height:400px;overflow-y:auto}
.log-line{font-family:Consolas,monospace;font-size:10px;color:#555;padding:2px 0;line-height:1.4;white-space:pre-wrap;word-break:break-all}
.empty-state{text-align:center;padding:30px;color:#95a5a6;font-size:14px}
.footer{text-align:center;margin-top:24px;padding:16px;color:#95a5a6;font-size:12px}
.footer a{color:#667eea;text-decoration:none;margin:0 8px}
.footer a:hover{text-decoration:underline}
@media(max-width:1200px){.main-layout{grid-template-columns:1fr;gap:16px}}
    </style>
</head>
<body>
<div class='container'>
<div class='header'>
<div class='header-top'>
<h1>Minecraft {{LOG_FILE_NAME}} åˆ†ææŠ¥å‘Š</h1>
<div class='header-links'>
<a href='https://github.com/ZH0531/PCL-Log-Analyzer' target='_blank' class='github-link'>GitHub æºç </a>
<a href='https://github.com/ZH0531/PCL-Log-Analyzer/issues' target='_blank' class='github-link'>åé¦ˆé—®é¢˜</a>
            </div>
</div>
<div class='status-big'>{{STATUS_TEXT}}</div>
<div class='header-hint'>æç¤ºï¼šè‹¥æœªæ‰¾åˆ°å…·ä½“é—®é¢˜åŸå› ï¼Œå»ºè®®ä½¿ç”¨å¤åˆ¶æŒ‰é’®å°†"å‘ç°çš„é—®é¢˜"æˆ–"å…³é”®æ—¥å¿—"å‘é€ç»™ä»–äººå¯»æ±‚å¸®åŠ©ï¼Œæˆ–é€šè¿‡å³ä¸Šè§’åé¦ˆé—®é¢˜</div>
        </div>
        
<div class='main-layout'>
<div class='left-column'>
<div class='card'>
                <h2>ğŸ“Š åŸºæœ¬ä¿¡æ¯</h2>
{{BASIC_INFO_HTML}}
                    </div>
            
<div class='card'>
<h2>ğŸ’¡ è§£å†³å»ºè®®</h2>
{{SUGGESTIONS_HTML}}
                </div>
            </div>
            
<div class='right-column'>
<div class='card' id='error-card'>
<button class='copy-btn' onclick='copyContent("error-card")'>å¤åˆ¶</button>
<h2>âš ï¸ å‘ç°çš„é—®é¢˜ ({{ERROR_COUNT}})</h2>
<div id='errors-container'></div>
            </div>
            
<div class='card' id='log-card'>
<button class='compress-btn' onclick='toggleCompress()'>è¿‡æ»¤</button>
<button class='copy-btn' onclick='copyContent("log-card")'>å¤åˆ¶</button>
<h2>ğŸ“‹ å…³é”®æ—¥å¿— ({{LOG_COUNT}})</h2>
<div class='log-container'>{{LOGS_HTML}}</div>
                </div>
            </div>
        </div>
        
<div class='footer'>
<p>PCL Log Analyzer v1.0.0 â€¢ åˆ†ææ—¶é—´: {{TIMESTAMP}}</p>
<p style='font-size:11px;color:#aaa;margin-top:6px'>æ­¤æŠ¥å‘Šä»…ä¾›å‚è€ƒ â€¢ åŸºäºæ—¥å¿—è‡ªåŠ¨ç”Ÿæˆ</p>
        </div>
    </div>
    <script>
// é”™è¯¯æ•°æ®ï¼ˆä» PowerShell æ³¨å…¥ï¼‰
const errorsData = {{ERRORS_JSON}};

function copyContent(cardId) {
    const card = document.getElementById(cardId);
    const btn = card.querySelector('.copy-btn');
    
    // è·å–å¡ç‰‡å†…å®¹ï¼ˆæ’é™¤æŒ‰é’®å’Œæ ‡é¢˜ï¼‰
    let textToCopy = '';
    const title = card.querySelector('h2').textContent;
    textToCopy += title + '\n' + '='.repeat(50) + '\n\n';
    
    if (cardId === 'error-card') {
        const errors = card.querySelectorAll('.error-box');
        errors.forEach((error, idx) => {
            const type = error.querySelector('.error-type')?.textContent || '';
            const code = error.querySelector('.error-code')?.textContent || '';
            textToCopy += (idx + 1) + '. ' + type + '\n' + code + '\n\n';
        });
        if (errors.length === 0) {
            textToCopy += card.querySelector('.empty-state')?.textContent || 'æ— é”™è¯¯';
        }
    } else if (cardId === 'log-card') {
        const logs = card.querySelectorAll('.log-line');
        logs.forEach(log => {
            textToCopy += log.textContent + '\n';
        });
        if (logs.length === 0) {
            textToCopy += card.querySelector('.empty-state')?.textContent || 'æ— æ—¥å¿—';
        }
    }
    
    // å¤åˆ¶åˆ°å‰ªè´´æ¿
    navigator.clipboard.writeText(textToCopy).then(() => {
        btn.textContent = 'å·²å¤åˆ¶';
        btn.classList.add('copied');
        setTimeout(() => {
            btn.textContent = 'å¤åˆ¶';
            btn.classList.remove('copied');
        }, 2000);
    }).catch(err => {
        btn.textContent = 'å¤±è´¥';
                    setTimeout(() => {
            btn.textContent = 'å¤åˆ¶';
                    }, 2000);
                });
            }

// æ¸²æŸ“é”™è¯¯åˆ—è¡¨
function renderErrors() {
    const container = document.getElementById('errors-container');
    
    if (!errorsData || errorsData.length === 0) {
        container.innerHTML = "<div class='empty-state'>âœ… æœªå‘ç°é”™è¯¯</div>";
        return;
    }
    
    let html = '';
    errorsData.forEach(e => {
        html += renderError(e);
    });
    container.innerHTML = html;
}

// æ¸²æŸ“å•ä¸ªé”™è¯¯
function renderError(e) {
    let html = "<div class='error-box'>";
    
    if (e.IsCollectDetails) {
        // æ”¶é›†è¯¦æƒ…ç±»å‹
        if (e.Type === 'Modåˆå§‹åŒ–å¤±è´¥') {
            if (e.Details && e.Details.length > 0) {
                html += `<div class='error-type'>${e.Type} (${e.Details.length}ä¸ªMod)</div>`;
                html += `<div class='error-code'>æ¶‰åŠçš„Mod: ${e.Details.sort().join(', ')}</div>`;
            } else {
                html += `<div class='error-type'>${e.Type}</div>`;
                html += "<div class='error-code'>è¯¦è§å…³é”®æ—¥å¿—</div>";
            }
        } else if (e.Type === 'ModåŠ è½½å¤±è´¥') {
            if (e.Details && e.Details.length > 0) {
                html += `<div class='error-type'>${e.Type} (${e.Details.length}ä¸ªMod)</div>`;
                html += `<div class='error-code'>å¤±è´¥çš„Mod: ${e.Details.sort().join(', ')}</div>`;
            } else {
                html += `<div class='error-type'>${e.Type}</div>`;
                html += "<div class='error-code'>è¯¦è§å…³é”®æ—¥å¿—</div>";
            }
        } else if (e.Type === 'Fabricç¯å¢ƒå®‰è£…äº†Forge Mod' || e.Type === 'Forgeç¯å¢ƒå®‰è£…äº†Fabric Mod') {
            if (e.Details && e.Details.length > 0) {
                html += `<div class='error-type'>${e.Type} (${e.Details.length}ä¸ªæ–‡ä»¶)</div>`;
                html += `<div class='error-code'>é”™è¯¯çš„Mod: ${e.Details.sort().join(', ')}</div>`;
            } else {
                html += `<div class='error-type'>${e.Type}</div>`;
                html += "<div class='error-code'>è¯¦è§å…³é”®æ—¥å¿—</div>";
            }
        } else if (e.Type === 'Modä¸MCç‰ˆæœ¬ä¸å…¼å®¹') {
            if (e.Details && e.Details.length > 0) {
                html += `<div class='error-type'>${e.Type} (${e.Details.length}ä¸ªMod)</div>`;
                html += `<div class='error-code'>ä¸å…¼å®¹çš„Mod: ${e.Details.sort().join(', ')}</div>`;
            } else {
                html += `<div class='error-type'>${e.Type}</div>`;
                html += "<div class='error-code'>è¯¦è§å…³é”®æ—¥å¿—</div>";
            }
        } else if (e.Type === 'Modç‰ˆæœ¬ä¸åŒ¹é…') {
            if (e.Details && e.Details.length > 0) {
                html += `<div class='error-type'>${e.Type} (${e.Details.length}ä¸ªé—®é¢˜)</div>`;
                e.Details.forEach(detail => {
                    html += `<div class='error-code'>â€¢ ${detail}</div>`;
                });
            } else {
                html += `<div class='error-type'>${e.Type}</div>`;
                html += "<div class='error-code'>è¯¦è§å…³é”®æ—¥å¿—</div>";
            }
        } else if (e.Type === 'Modä¾èµ–ç¼ºå¤±') {
            if (e.Details && e.Details.length > 0) {
                html += `<div class='error-type'>${e.Type} (${e.Details.length}ä¸ªä¾èµ–)</div>`;
                html += `<div class='error-code'>ç¼ºå¤±çš„Mod: ${e.Details.sort().join(', ')}</div>`;
            } else {
                html += `<div class='error-type'>${e.Type}</div>`;
                const firstLine = cleanErrorLine(e.Content);
                html += `<div class='error-code'>${firstLine}ï¼ˆè¯¦è§å…³é”®æ—¥å¿—ï¼‰</div>`;
            }
        } else {
            // å…¶ä»–æ”¶é›†è¯¦æƒ…ç±»å‹ï¼šæ˜¾ç¤ºè®¡æ•°
            const countText = (e.Count && e.Count > 1) ? ` (å…±${e.Count}${getCountUnit(e.Type)})` : '';
            html += `<div class='error-type'>${e.Type}${countText}</div>`;
            html += `<div class='error-code'>${getErrorDescription(e)}</div>`;
        }
    } else {
        // æ™®é€šé”™è¯¯ç±»å‹
        html += `<div class='error-type'>${e.Type}</div>`;
        const cleanContent = cleanErrorLine(e.Content);
        html += `<div class='error-code'>${cleanContent}</div>`;
    }
    
    html += "</div>";
    return html;
}

// æ¸…ç†é”™è¯¯è¡Œï¼ˆå»é™¤æ—¶é—´æˆ³ã€çº¿ç¨‹ä¿¡æ¯ã€éæ³•å­—ç¬¦ï¼‰
function cleanErrorLine(content) {
    if (!content) return '';
    
    let firstLine = content.split('\n')[0].trim();
    
    // å»é™¤æ—¶é—´æˆ³å’Œçº¿ç¨‹ä¿¡æ¯
    firstLine = firstLine.replace(/^\[[\d:]+\]\s*\[.+?\]:\s*/, '');
    firstLine = firstLine.replace(/^\[[\d:]+\]\s*\[.+?\]\s+/, '');
    
    // æˆªæ–­è¿‡é•¿å†…å®¹
    if (firstLine.length > 200) {
        firstLine = firstLine.substring(0, 197) + '...';
    }
    
    // æ›¿æ¢éæ³•å­—ç¬¦
    firstLine = firstLine.replace(/[^\x20-\x7E\u4e00-\u9fff\[\]\(\)\{\}\-\+\=\.\,\:\;\/\\]/g, '?');
    
    return firstLine;
}

// è·å–è®¡æ•°å•ä½
function getCountUnit(type) {
    const units = {
        'æ¨¡å‹åŠ è½½å¤±è´¥': 'ä¸ªæ–‡ä»¶',
        'èµ„æºè·¯å¾„é”™è¯¯': 'ä¸ªæ–‡ä»¶',
        'èµ„æºæ³¨å†Œç¼ºå¤±': 'é¡¹',
        'ModçŠ¶æ€å¼‚å¸¸': 'æ¡äº‹ä»¶è¢«æ‹’ç»',
        'Modè·³è¿‡åŠ è½½': 'æ¬¡',
        'ä¸€èˆ¬é”™è¯¯': 'æ¡',
        'è‡´å‘½é”™è¯¯': 'æ¡'
    };
    return units[type] || 'ä¸ª';
}

// è·å–é”™è¯¯æè¿°
function getErrorDescription(e) {
    const descriptions = {
        'æ¨¡å‹åŠ è½½å¤±è´¥': 'æŸäº›Modçš„æ¨¡å‹æ–‡ä»¶ç¼ºå¤±æˆ–è·¯å¾„é”™è¯¯ï¼Œé€šå¸¸ä¸å½±å“æ¸¸æˆè¿è¡Œ',
        'èµ„æºè·¯å¾„é”™è¯¯': 'æ–‡ä»¶ååŒ…å«éæ³•å­—ç¬¦ï¼Œé€šå¸¸ä¸å½±å“æ¸¸æˆè¿è¡Œ',
        'ModçŠ¶æ€å¼‚å¸¸': 'Forgeæ‹’ç»å‘å´©æºƒçš„Modå‘é€äº‹ä»¶ï¼Œè¿™æ˜¯è¿å¸¦é”™è¯¯ï¼Œè§£å†³æ ¹æœ¬åŸå› å³å¯',
        'æ¸¸æˆå´©æºƒ': 'æ¸¸æˆå·²ç”Ÿæˆå´©æºƒæŠ¥å‘Šï¼Œè¯¦ç»†å´©æºƒä¿¡æ¯è¯·æŸ¥çœ‹ä¸Šæ–¹çš„å…¶ä»–é”™è¯¯ç±»å‹æˆ–å´©æºƒæŠ¥å‘Šæ–‡ä»¶'
    };
    
    if (descriptions[e.Type]) {
        return descriptions[e.Type];
    }
    
    if (e.Type === 'èµ„æºæ³¨å†Œç¼ºå¤±' || e.Type === 'Modè·³è¿‡åŠ è½½') {
        return cleanErrorLine(e.Content);
    }
    
    if (e.Type === 'ä¸€èˆ¬é”™è¯¯' && e.Count && e.Count > 1) {
        return 'æ£€æµ‹åˆ°å¤šæ¡æœªåˆ†ç±»çš„é”™è¯¯ï¼Œè¯·åœ¨å…³é”®æ—¥å¿—ä¸­æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯';
    }
    
    if (e.Type === 'è‡´å‘½é”™è¯¯') {
        if (e.Count && e.Count > 1) {
            return 'æ£€æµ‹åˆ°è‡´å‘½é”™è¯¯ï¼Œå…·ä½“é”™è¯¯ä¿¡æ¯è¯·æŸ¥çœ‹ä¸Šæ–¹çš„å…¶ä»–é”™è¯¯ç±»å‹æˆ–å…³é”®æ—¥å¿—';
        } else {
            return 'æ£€æµ‹åˆ°è‡´å‘½é”™è¯¯ï¼Œè¿™é€šå¸¸æ˜¯å…¶ä»–é”™è¯¯çš„ç»“æœï¼Œè¯·æŸ¥çœ‹ä¸Šæ–¹çš„å…¶ä»–é”™è¯¯ç±»å‹æ‰¾åˆ°æ ¹æœ¬åŸå› ';
        }
    }
    
    if (e.Type === 'ä¸€èˆ¬é”™è¯¯' && (!e.Count || e.Count === 1)) {
        return cleanErrorLine(e.Content);
    }
    
    return 'è¯¦è§å…³é”®æ—¥å¿—';
}

let isFiltered = false;
let originalLogs = '';

// æå–æ—¥å¿—çš„æ ¸å¿ƒæ¨¡å¼ï¼ˆå»æ‰å¯å˜éƒ¨åˆ†ï¼‰
function extractPattern(log) {
    let pattern = log;
    
    // ç§»é™¤æ—¶é—´æˆ³
    pattern = pattern.replace(/\[\d{8}\s+\d{2}:\d{2}:\d{2}\.\d{3}\]/g, '');
    pattern = pattern.replace(/\[\d{4}\?\?\d{4}\s+\d{2}:\d{2}:\d{2}\.\d{3}\]/g, '');
    
    // ç§»é™¤æ‰€æœ‰æ–¹æ‹¬å·å†…å®¹ï¼ˆçº¿ç¨‹ã€åŒ…åã€ç±»åç­‰ï¼‰
    pattern = pattern.replace(/\[[^\]]*\]/g, '');
    
    // âš ï¸ å…³é”®ï¼šå…ˆå¤„ç†ç‰¹å®šæ¨¡å¼ï¼Œå†å¤„ç†é€šç”¨æ¨¡å¼ï¼
    
    // ç§»é™¤å…·ä½“çš„äº‹ä»¶åï¼ˆå¿…é¡»åœ¨ç±»åæ›¿æ¢ä¹‹å‰ï¼ï¼‰
    pattern = pattern.replace(/event\s+[\w\.\$]+/gi, 'event <EVENT>');
    
    // ç§»é™¤å…·ä½“çš„èµ„æºè·¯å¾„ï¼ˆå¦‚ eternal_starlight:trims/...ï¼‰
    pattern = pattern.replace(/[a-z0-9_]+:[a-z0-9_\/\-\.]+/gi, '<PATH>');
    
    // ç§»é™¤å…·ä½“çš„æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ ./config/...ï¼‰
    pattern = pattern.replace(/\.\/[a-z0-9_\/\-\.]+/gi, '<FILE>');
    pattern = pattern.replace(/[A-Z]:\\[^\s]+/g, '<FILE>');
    
    // ç§»é™¤å…·ä½“çš„ç±»åï¼ˆæ”¾åœ¨æœ€åï¼Œé¿å…å½±å“äº‹ä»¶ååŒ¹é…ï¼‰
    pattern = pattern.replace(/[a-z]+(\.[a-z]+){2,}/gi, '<CLASS>');
    
    // ç§»é™¤UUID
    pattern = pattern.replace(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/gi, '<UUID>');
    
    // ç§»é™¤æ•°å­—
    pattern = pattern.replace(/\b\d+\b/g, '<NUM>');
    
    // ç§»é™¤è¿ç»­ç©ºæ ¼
    pattern = pattern.replace(/\s+/g, ' ').trim();
    
    return pattern;
}

function toggleCompress() {
    const btn = document.querySelector('.compress-btn');
    const container = document.querySelector('.log-container');
    const logLines = document.querySelectorAll('.log-line');
    
    if (!isFiltered) {
        // ä¿å­˜åŸå§‹HTML
        originalLogs = container.innerHTML;
        
        // è·å–æ‰€æœ‰æ—¥å¿—
        let logs = Array.from(logLines).map(line => line.textContent.trim()).filter(text => text.length > 0);
        
        // ç¬¬ä¸€æ­¥ï¼šç»Ÿè®¡æ‰€æœ‰æ¨¡å¼
        const patternMap = new Map(); // pattern -> {count, firstLog, indices[]}
        
        logs.forEach((log, index) => {
            const pattern = extractPattern(log);
            if (!patternMap.has(pattern)) {
                patternMap.set(pattern, { count: 0, firstLog: log, firstIndex: index });
            }
            patternMap.get(pattern).count++;
        });
        
        // ç¬¬äºŒæ­¥ï¼šæŒ‰åŸå§‹é¡ºåºè¾“å‡ºï¼Œè·³è¿‡é‡å¤
        let compressedHTML = '';
        const processedPatterns = new Set();
        
        logs.forEach((log, index) => {
            const pattern = extractPattern(log);
            
            // å¦‚æœè¿™ä¸ªæ¨¡å¼å·²ç»å¤„ç†è¿‡ï¼Œç›´æ¥è·³è¿‡
            if (processedPatterns.has(pattern)) {
                return;
            }
            
            const entry = patternMap.get(pattern);
            
            // åªåœ¨ç¬¬ä¸€æ¬¡é‡åˆ°è¿™ä¸ªæ¨¡å¼æ—¶å¤„ç†
            if (entry.count >= 3) {
                // é‡å¤3æ¬¡ä»¥ä¸Šï¼Œåˆå¹¶æ˜¾ç¤º
                let shortLog = log.replace(/^\[.*?\]\s*\[.*?\]\s*/, '');
                
                // æ™ºèƒ½æå–é‡å¤æ¨¡å¼çš„å…³é”®è¯
                let summary = shortLog;
                if (shortLog.includes('Cowardly refusing to send event')) {
                    summary = 'Cowardly refusing to send event (æ‹’ç»å‘é€äº‹ä»¶åˆ°å´©æºƒçš„Mod)';
                } else if (shortLog.includes('Failed to load palette image')) {
                    summary = 'Failed to load palette image (æ— æ³•åŠ è½½è°ƒè‰²æ¿å›¾åƒ)';
                } else if (shortLog.includes('unable to apply palette')) {
                    summary = 'unable to apply palette (æ— æ³•åº”ç”¨è°ƒè‰²æ¿)';
                } else if (shortLog.includes('Using vanilla stitcher implementation')) {
                    summary = 'Using vanilla stitcher implementation (ä½¿ç”¨åŸç‰ˆæ‹¼æ¥å®ç°)';
                } else if (shortLog.includes('Preparing crash report')) {
                    summary = 'Preparing crash report (å‡†å¤‡å´©æºƒæŠ¥å‘Š)';
                } else if (shortLog.includes('Failed to load model')) {
                    summary = 'Failed to load model (æ¨¡å‹åŠ è½½å¤±è´¥)';
                } else if (shortLog.length > 100) {
                    summary = shortLog.substring(0, 97) + '...';
                }
                
                compressedHTML += `<div class='log-line' style='color:#f57c00;font-weight:600'>[Ã—${entry.count}] ${summary}</div>`;
            } else {
                // ä¸é‡å¤æˆ–é‡å¤å°‘ï¼Œæ­£å¸¸æ˜¾ç¤º
                compressedHTML += `<div class='log-line'>${log}</div>`;
            }
            
            // æ ‡è®°ä¸ºå·²å¤„ç†
            processedPatterns.add(pattern);
        });
        
        container.innerHTML = compressedHTML || "<div class='empty-state'>è¿‡æ»¤åæ— å†…å®¹</div>";
        btn.textContent = 'å·²è¿‡æ»¤';
        btn.classList.add('active');
        isFiltered = true;
            } else {
        // è¿˜åŸåŸå§‹å†…å®¹
        container.innerHTML = originalLogs;
        btn.textContent = 'è¿‡æ»¤';
        btn.classList.remove('active');
        isFiltered = false;
    }
}

// é¡µé¢åŠ è½½å®Œæˆåæ¸²æŸ“é”™è¯¯å’Œè‡ªåŠ¨æ‰§è¡Œè¿‡æ»¤
window.addEventListener('DOMContentLoaded', function() {
    renderErrors();
    toggleCompress();
        });
    </script>
</body>
</html>
